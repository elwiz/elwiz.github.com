/**
 * Drag and drop for the jQuery UI sortable widget
 * Version: 0.4
 * Copyright (c) Tom Wojcik
 * Licenced under the BeerWare licence.
 */
(function(a,b){a.widget("ui.dnd4sortable",{options:{dummyTag:"li",dummyText:"...",drop:function(a){}},_create:function(){this.element.addClass(this.widgetBaseClass);a(this.element).bind("dragover",{self:this},this._dragIn);a(this.element).parent().bind("dragover",{self:this},this._dragOut);a(this.element).bind("dragover",{self:this},this._dragOver);a(this.element).bind("drop",{self:this},this._drop)},_dragIn:function(b){var c=b.data.self;if(a(c.element).data(c.widgetName+"IsOver"))return false;a(c.element).data(c.widgetName+"IsOver",true);var d=a(document.createElement(c.options.dummyTag));d.text(c.options.dummyText);a(c.element).data(c.widgetName+"Dummy",d)},_dragOut:function(b){var c=b.data.self;if(!a(c.element).data(c.widgetName+"IsOver"))return false;a(c.element).data(c.widgetName+"IsOver",false);var d=a(c.element).data(c.widgetName+"Dummy");var e=a(c.element).data("sortable");if(d&&e&&e.helper){e._mouseStop(b);d.remove()}},_dragOver:function(b){var c=b.data.self;var d=a(c.element).data(c.widgetName+"Dummy");var e=a(c.element).data("sortable");if(d&&d.parent().length==0&&e){a(c.element).append(d);e.currentItem=d.data("sortable-item",true);b.target=d;e._mouseCapture(b,true);e._mouseStart(b,true,true);e.offset.click.top=0;e.offset.click.left=0}if(e.currentItem&&e.helper){e._mouseDrag(b)}b.preventDefault();b.stopPropagation()},_drop:function(b){var c=b.data.self;var d=a(c.element).data(c.widgetName+"Dummy");var e=a(c.element).data("sortable");if(e&&e.helper){e._mouseStop(b);c.options.drop.call(c,b.originalEvent)}b.preventDefault()},dummy:function(){return a(this.element).data(this.widgetName+"Dummy")},revert:function(){var b=a(this.element).data(this.widgetName+"Dummy");var c=a(this.element).data("sortable");if(b){b.remove()}if(c&&c.helper){c._mouseStop()}}})})(jQuery)